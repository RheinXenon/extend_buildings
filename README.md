# 居民署建筑扩展 (Resident Office Building Mod)

## 简介

为《欧陆风云5》添加居民署建筑，提供基础行政管理服务，通过三级建筑升级系统提供递增的人口增长效果。

## 建筑特性

- **建造条件**: 地区人口比例 < 60%
- **最大等级**: 3级
- **类型**: 基础设施建筑（农民工作）
- **解锁条件**: 所有等级游戏开始即可用

## 建筑等级对比

| 建筑等级               | 资源消耗                    | 效果                   | 说明     |
| ---------------------- | --------------------------- | ---------------------- | -------------- |
| **一级：基础居民服务** | 木材0.1, 工具0.1, 布料0.1   | +0.5%人口增长, +3%疾病抗性              | 基础行政管理服务 |
| **二级：改进居民服务** | 木材0.2, 工具0.2, 布料0.2  | +0.7%人口增长, +6%疾病抗性 | 改进的公共服务 |
| **三级：高级人口管理** | 木材0.3, 工具0.3, 布料0.3 | +0.9%人口增长, +9%疾病抗性 | 全面的人口管理 |

## 安装方法

1. 复制 `extend_buildings` 文件夹到：
   ```
   Documents/Paradox Interactive/Europa Universalis V/mod/
   ```
2. 在游戏mod管理器中启用

## 重要技术说明

### 建筑等级系统

✅ **设计原理**: 使用建筑等级（max_levels = 3）而非生产方式切换来提供不同效果

- **为什么不用生产方式**: EU5中生产方式不支持modifier效果，只能定义资源输入/输出
- **建筑等级优势**: 使用 `raw_modifier`（固定值）+ `modifier`（乘以等级）组合实现递增效果
- **自动缩放**: 资源消耗和部分效果自动随建筑等级线性增长
- **即时可用**: 所有等级游戏开始就解锁，无需科技或进度要求

### 测试步骤

1. 建造居民署（一级建筑）
2. 升级到二级或三级
3. 检查人口增长率和疾病抗性数值变化
4. 验证资源消耗是否随等级递增

### 文件结构

```
extend_buildings/
├── in_game/common/
│   ├── building_types/resident_office.txt
│   └── production_methods/resident_office_production_methods.txt
└── main_menu/localization/
    ├── english/resident_office_l_english.yml
    └── simp_chinese/resident_office_l_simp_chinese.yml
```

## 版本历史

- **v3.0.0** (2025-11-10) - 改用三级建筑升级系统，解决生产方式切换无效问题
- **v2.0.0** (2025-11-10) - 添加三种生产方式系统（已废弃）
- **v1.0.1** (2025-11-10) - 修复本地化UTF-8 with BOM编码
- **v1.0.0** (2025-11-10) - 初始版本

## 兼容性

- 游戏版本: 1.0.*
- 不覆盖原版文件
- 本地化: UTF-8 with BOM编码
